<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
<body>
    



    <script>

        // 一、提炼函数  
        // what 将一段代码提炼到一个独立的函数中，并以这段代码的作用命名 
        // where 如果需要花时间浏览一段代码才能弄清楚它到底要干什么，那么这时候就应该将其提炼到一个函数中，并根据它所做的事命名。
        // 以后再读这段代码时，一眼就能知道这个函数的用途。
        
        // ==================重构前==================
        function printOwing(invoice) {
            let outstanding = 0;
            console.log("***********************");
            console.log("**** Customer Owes ****");
            console.log("***********************");
        } 
        // ==================重构后==================
        function printOwing(invoice) {
            let outstanding = 0;
            printBanner()
        }

        function printBanner() {
            console.log("***********************");
            console.log("**** Customer Owes ****");
            console.log("***********************");
        }






        // 二、函数参数化
        // what 以参数的形式传入不同的值，消除重复函数
        // where 如果发现两个函数逻辑非常相似， 只有一些字面量值不同， 可以将其合并成一个函数， 以参数的形式传入不同的值， 从而消除重复。
        
        // ==================重构前==================
        function clickFaultsItem(item){
            this.$u.route({
                url: 'xxx',
                params: {
                    id: item.id,
                    type: '异常'
                }
            })
        }
        function clickFNormalItem(item){
            this.$u.route({
                url: 'xxx',
                params: {
                    id: item.id,
                    type: '正常'
                }
            })
        }
        // ==================重构后==================
        function clickItem(id, type){
            this.$u.route({
                url: 'xxx',
                params: {
                    id,
                    type
                }
            })
        }





        // 三、使用策略模式替换“胖”分支
        // what 使用策略模式替换“胖胖”的if-else或者switch-case
        // where 当if-else或者switch-case分支过多时可以使用策略模式将各个分支独立出来

        // ==================重构前==================
        function getPrice(tag, originPrice){
            // 新人价
            if(tag === 'newUser'){
                return originPrice > 50.1 ? originPrice - 50 : originPrice
            }
            // 返场价格
            if(tag === 'back'){
                return originPrice > 200 ? originPrice - 50 : originPrice
            }
            // 活动价格
            if(tag === 'activity'){
                return originPrice > 300 ? originPrice - 100 : originPrice
            }
        }
        // ==================重构后==================
        const priceHandler = {
            newUser(originPrice){
                return originPrice > 50.1 ? originPrice - 50 : originPrice
            },
            back(originPrice){
                return originPrice > 200 ? originPrice - 50 : originPrice
            },
            activity(originPrice){
                return originPrice > 300 ? originPrice - 100 : originPrice
            }
        }

        function getPrice(tag, originPrice){

            return priceHandler[tag](originPrice)
        }




































    </script>



</body>
</html>